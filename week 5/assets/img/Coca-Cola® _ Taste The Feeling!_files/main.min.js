(function(c,a){var b=c.MarketingServices||{};
function d(e){throw new Error(e)
}if(!b.Utility){d("MarketingServices' Utility is not loaded.")
}if(!b.CookieManager){d("MarketingServices' CookieManager is not loaded.")
}if(!b.Validator){d("MarketingServices' Validator is not loaded.")
}if(!b.Enum){d("MarketingServices' Enum is not loaded.")
}if(!b.Constants){d("MarketingServices' Constants is not loaded.")
}if(!b.JanrainHelper){d("MarketingServices' JanrainHelper is not loaded.")
}}(window,document));
(function(c,b){function a(l,f){function i(){return c.element("#serviceEndpoint").val()
}function p(){return b.CookieManager.getItem(b.Constants.KO_ACCESS_TOKEN)
}function m(t,s){var r=null;
if(!t){throw new Error("Invalid endpoint. Got "+t)
}if(!s){if(b.isPublishMode){r=c.element("#unauthorizedUserPagePath").val();
f.location=r
}else{throw new Error("Invalid token. Got "+s)
}}}function g(u,t){t=t||{};
var v=i(),r=p(),s={method:"GET",url:v+"/api/"+u,headers:{"x-access-token":r},params:t.params,data:t.data};
m(v,r);
return s
}function q(u,t){var v=i(),r=p(),s={method:"POST",url:v+"/api/"+u,headers:{"x-access-token":r},data:t};
m(v,r);
return s
}function j(t){var r=null;
try{r=g("physicalAddressInfo")
}catch(s){return t(s,null)
}l(r).success(function(v,u,w){t(null,{data:v,status:u,headers:w})
}).error(function(u){t(u,null)
})
}function o(r,v){var t=null,s={attributes:r};
try{t=q("janrain/entityUpdate",s)
}catch(u){return v(u,null)
}l(t).success(function(x,w,y){v(null,{data:x,status:w,headers:y})
}).error(function(w){v(w,null)
})
}function n(t){var r=null;
try{r=g("itemOffers")
}catch(s){return t(s,null)
}l(r).success(function(v,u,w){t(null,{data:v,status:u,headers:w})
}).error(function(u){t(u,null)
})
}function h(t,u){var r=null;
try{r=g("itemDetails/"+t)
}catch(s){return u(s,null)
}l(r).success(function(v){u(null,{data:v})
}).error(function(v){u(v)
})
}function d(s,u){if(!s.id){return u(new Error("The item id was not passed."),null)
}var r=null;
try{if(s.loyaltyNumber){r=q("redeemItem/"+s.id+"/"+s.loyaltyNumber,s.data)
}else{r=q("redeemItem/"+s.id,s.data)
}}catch(t){return u(t,null)
}l(r).success(function(w,v,x){u(null,{data:w,status:v,headers:x})
}).error(function(v){u(v,null)
})
}function k(s,u){if(!s.id){return u(new Error("The item id was not passed."),null)
}var r=null;
try{r=q("playSweeps/"+s.id,s.data)
}catch(t){return u(t,null)
}l(r).success(function(w,v,x){u(null,{data:w,status:v,headers:x})
}).error(function(v){u(v,null)
})
}function e(s,u){if(!s.id){return u(new Error("The item id was not passed."),null)
}var r=null;
try{r=q("playInstant/"+s.id,s.data)
}catch(t){return u(t,null)
}l(r).success(function(w,v,x){u(null,{data:w,status:v,headers:x})
}).error(function(v){u(v,null)
})
}return{getUserAddress:j,updateUserAddress:o,getItemOffers:n,getItemDetail:h,redeemItem:d,playSweeps:k,playInstant:e}
}c.module("api",[]).factory("marketingservices-api",a);
a.$inject=["$http","$window","$q"]
}(window.angular,window.MarketingServices));
(function(c,a){var b=c.angular.module("button-style-factory",[]);
b.factory("claim-it-style-factory",[function(){var f=".ClaimItButton a[data-claim-button=true]",d=null,m=null;
function l(n){return a.querySelector(n)
}function k(){var n=l(f).style.backgroundColor,o=l(f).style.color;
d={backgroundColor:n,textColor:o}
}function j(){l(f).removeAttribute("style");
l(f).className="ajaxLoading"
}function i(){l(f).style.backgroundColor=l(f).getAttribute("data-inactive-bgcolor");
l(f).style.color=l(f).getAttribute("data-inactive-fgcolor");
l(f).className="inactive";
m=c.setTimeout(j,1000)
}function g(){k();
i()
}function e(){if(d){l(f).style.backgroundColor=d.backgroundColor;
l(f).style.color=d.textColor
}l(f).className="button"
}function h(){c.clearTimeout(m)
}return{storeInlineStyle:k,startLoadingAnimation:g,activateLoadingSpinner:j,resetButtonStyle:e,stopLoadingAnimation:h}
}])
}(window,document));
var MarketingServices=MarketingServices||{};
(function(b,a){var d=b.angular.module("item-storage",[]),c;
d.factory("marketingservices-item-storage",[function(){var f,g,e;
g=function(i,h){b.localStorage.setItem("marketingservices-item-data-"+i,JSON.stringify(h))
};
e=function(h){b.localStorage.removeItem("marketingservices-item-data-"+h)
};
f=function(i){var h=b.localStorage["marketingservices-item-data-"+i];
if(!h){return null
}return JSON.parse(h)
};
return{get:f,save:g,remove:e}
}]);
c=function(){var e;
for(e in b.localStorage){if(b.localStorage.hasOwnProperty(e)){if(e.indexOf("marketingservices-item-data")!==-1){b.localStorage.removeItem(e)
}}}};
MarketingServices.JanrainHelper.addExpiredTokenHandler(c);
MarketingServices.JanrainHelper.addInvalidTokenHandler(c);
MarketingServices.JanrainHelper.addSessionEndedHandler(c)
}(window,document));