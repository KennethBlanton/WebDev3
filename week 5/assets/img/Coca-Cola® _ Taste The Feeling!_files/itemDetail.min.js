(function(h,c){var e=h.MarketingServices||{},g=h.MarketingServices.ItemDetailService||{},b=h.angular.module("item-detail",["item-storage","modal-error","api"]),d=g.itemsWaitingForData||[];
g.itemsWaitingForData=d;
e.ItemDetailService=g;
h.MarketingServices=e;
function f(i){i.interceptors.push("httpInterceptor")
}f.$inject=["$httpProvider"];
function a(k,j,l){function i(n,p,o){var m;
if(!n){return p("ItemId is invalid")
}if(!o){m=k.get(n);
if(m){p(null,{data:m});
return
}if(d.indexOf(n)>-1){l(function(){i(n,p,false)
},100);
return
}}d.push(n);
j.getItemDetail(n,function(r,q){var s=null;
if(!r&&!o){s=Array.isArray(q.data)?q.data[0]:q.data;
q.data=s;
k.save(n,s);
g.itemsWaitingForData=d.filter(function(t){return t!==n
})
}return p(r,q)
})
}return{getData:i}
}a.$inject=["marketingservices-item-storage","marketingservices-api","$timeout"];
b.config(f).factory("marketingservices-item-detail",a)
}(window,document));