(function(){window.angular.module("angular-components.bith-date",[])
}());
(function(a,c){function b(){var d=this;
d.$onInit=function(){var f=new Date(),e;
d.isAuthenticated=MarketingServices.Utility.isUserAuthenticated();
d.year="";
d.month="";
d.day="";
d.days=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31];
d.months=[{id:0,name:"January"},{id:1,name:"February"},{id:2,name:"March"},{id:3,name:"April"},{id:4,name:"May"},{id:5,name:"June"},{id:6,name:"July"},{id:7,name:"August"},{id:8,name:"September"},{id:9,name:"October"},{id:10,name:"November"},{id:11,name:"December"}];
d.years=[];
for(e=(f.getFullYear());
e>(f.getFullYear()-104);
e--){d.years.push(e)
}};
d.$onChanges=function(){if(d.userBirth){var e=d.userBirth.split("-").map(Number);
d.year=e[0];
d.month=d.months[e[1]-1];
d.day=e[2]
}};
d.updateDate=function(){var f=d.isValidDate(),e={};
if(f){e.updatedYear=d.year;
e.updatedMonth=d.month;
e.updatedDay=d.day
}d.onUpdateBirth({birthDate:e,isValid:f})
};
d.isValidDate=function(){var e=null;
if(!d.year&&!d.month&&!d.day){return true
}if(d.year&&d.month&&d.day){e=new Date(d.year,d.month.id,d.day)
}return e&&(e.getMonth()===d.month.id)
};
d.fieldsAreInvalid=function(){return d.parentForm.year.$invalid&&d.parentForm.day.$invalid&&d.parentForm.month.$invalid
};
d.fieldsTouchedOrFormSubmitted=function(){return d.fieldsTouched()||d.formSubmitted()
};
d.fieldsTouched=function(){return d.parentForm.year.$touched&&d.parentForm.month.$touched&&d.parentForm.day.$touched
};
d.formSubmitted=function(){return d.parentForm.$submitted
}
}a.module("angular-components.bith-date").component("birthDate",{templateUrl:"/etc/clientlibs/marketingservices/angular-components/birth-date/template/birth-date.html",controller:b,bindings:{settings:"<",userBirth:"<",onUpdateBirth:"&",parentForm:"="}})
}(window.angular,window.alert));