var OneKOID=OneKOID||{};
OneKOID.FieldsConfiguration=OneKOID.FieldsConfiguration||{};
OneKOID.FieldsConfiguration.screens=[{name:"socialRegistration",janrainFieldNames:{firstName:"capture_socialRegistration_socialRegistration_firstName",lastName:"capture_socialRegistration_socialRegistration_lastName",emailAddress:"capture_socialRegistration_socialRegistration_emailAddress",emailConfirm:"capture_socialRegistration_socialRegistration_emailConfirm",password:"capture_socialRegistration_socialRegistration_password",displayName:"capture_socialRegistration_socialRegistration_displayName",address1:"capture_socialRegistration_address_address1",address2:"capture_socialRegistration_address_address2",city:"capture_socialRegistration_address_city",state:"capture_socialRegistration_address_state",zip:"capture_socialRegistration_address_zip",gender:"capture_socialRegistration_gender_male_0",residency:"capture_socialRegistration_residency",emailOptIn:"capture_socialRegistration_emailOptIn",phone:"capture_socialRegistration_phone",birthdate:"capture_socialRegistration_birthdate"}},{name:"traditionalRegistration",janrainFieldNames:{firstName:"capture_traditionalRegistration_traditionalRegistration_firstName",lastName:"capture_traditionalRegistration_traditionalRegistration_lastName",emailAddress:"capture_traditionalRegistration_traditionalRegistration_emailAddress",emailConfirm:"capture_traditionalRegistration_traditionalRegistration_emailConfirm",password:"capture_traditionalRegistration_traditionalRegistration_password",displayName:"capture_traditionalRegistration_traditionalRegistration_displayName",address1:"capture_traditionalRegistration_address_address1",address2:"capture_traditionalRegistration_address_address2",city:"capture_traditionalRegistration_address_city",state:"capture_traditionalRegistration_address_state",zip:"capture_traditionalRegistration_address_zip",gender:"capture_traditionalRegistration_gender_male_0",residency:"capture_traditionalRegistration_residency",emailOptIn:"capture_traditionalRegistration_emailOptIn",phone:"capture_traditionalRegistration_phone",birthdate:"capture_traditionalRegistration_birthdate"}},{name:"editProfile",janrainFieldNames:{firstName:"capture_editProfile_firstName",lastName:"capture_editProfile_lastName",emailAddress:"capture_editProfile_emailAddress",emailConfirm:"capture_editProfile_emailConfirm",password:"capture_editProfile_password",displayName:"capture_editProfile_displayName",address1:"capture_editProfile_address_address1",address2:"capture_editProfile_address_address2",city:"capture_editProfile_address_city",state:"capture_editProfile_address_state",zip:"capture_editProfile_address_zip",gender:"capture_editProfile_gender_male_0",residency:"capture_editProfile_residency",emailOptIn:"capture_editProfile_emailOptIn",phone:"capture_editProfile_phone",birthdate:"capture_editProfile_birthdate"}},{name:"legalAcceptanceScreen",janrainFieldNames:{firstName:"capture_legalAcceptanceScreen_firstName",lastName:"capture_legalAcceptanceScreen_lastName",emailAddress:"capture_legalAcceptanceScreen_emailAddress",emailConfirm:"capture_legalAcceptanceScreen_emailConfirm",password:"capture_legalAcceptanceScreen_password",displayName:"capture_legalAcceptanceScreen_displayName",address1:"capture_legalAcceptanceScreen_address_address1",address2:"capture_legalAcceptanceScreen_address_address2",city:"capture_legalAcceptanceScreen_address_city",state:"capture_legalAcceptanceScreen_address_state",zip:"capture_legalAcceptanceScreen_address_zip",gender:"capture_legalAcceptanceScreen_gender_male_0",residency:"capture_legalAcceptanceScreen_residency",emailOptIn:"capture_legalAcceptanceScreen_emailOptIn",phone:"capture_legalAcceptanceScreen_phone",birthdate:"capture_legalAcceptanceScreen_birthdate"}},{name:"requirementsScreen",janrainFieldNames:{firstName:"capture_requirementsScreen_firstName",lastName:"capture_requirementsScreen_lastName",emailAddress:"capture_requirementsScreen_emailAddress",emailConfirm:"capture_requirementsScreen_emailConfirm",password:"capture_requirementsScreen_password",displayName:"capture_requirementsScreen_displayName",address1:"capture_requirementsScreen_address_address1",address2:"capture_requirementsScreen_address_address2",city:"capture_requirementsScreen_address_city",state:"capture_requirementsScreen_address_state",zip:"capture_requirementsScreen_address_zip",gender:"capture_requirementsScreen_gender_male_0",residency:"capture_requirementsScreen_residency",emailOptIn:"capture_requirementsScreen_emailOptIn",phone:"capture_requirementsScreen_phone",birthdate:"capture_requirementsScreen_birthdate"}}];
OneKOID.FieldsConfiguration.fieldErrorMessages=[{fieldNameSuffix:"_firstName",errorMessage:"This field is required.",fieldStructure:"text"},{fieldNameSuffix:"_lastName",errorMessage:"This field is required.",fieldStructure:"text"},{fieldNameSuffix:"_emailAddress",errorMessage:"Email address is required.",fieldStructure:"text"},{fieldNameSuffix:"_emailConfirm",errorMessage:"Email Confirm is required.",fieldStructure:"text"},{fieldNameSuffix:"_password",errorMessage:"Password is required.",fieldStructure:"text"},{fieldNameSuffix:"_birthdate",errorMessage:"Birthdate is required.",fieldStructure:"date"},{fieldNameSuffix:"_displayName",errorMessage:"This field is required.",fieldStructure:"text"},{fieldNameSuffix:"_address1",errorMessage:"This field is required.",fieldStructure:"text"},{fieldNameSuffix:"_address2",errorMessage:"This field is required.",fieldStructure:"text"},{fieldNameSuffix:"_address_city",errorMessage:"This field is required.",fieldStructure:"text"},{fieldNameSuffix:"_address_state",errorMessage:"This field is required.",fieldStructure:"select"},{fieldNameSuffix:"_address_zip",errorMessage:"This field is required.",fieldStructure:"text"},{fieldNameSuffix:"_gender",errorMessage:"This field is required.",fieldStructure:"radio"},{fieldNameSuffix:"_residency",errorMessage:"This field is required.",fieldStructure:"checkbox"},{fieldNameSuffix:"_emailOptIn",errorMessage:"This field is required.",fieldStructure:"checkbox"},{fieldNameSuffix:"_phone",errorMessage:"This field is required.",fieldStructure:"text"}];
var OneKOID=OneKOID||{};
OneKOID.FormUtils=(function(){var f,a=OneKOID.FieldsConfiguration.screens,e,c,b,d=["traditionalRegistration","editProfile","socialRegistration","legalAcceptanceScreen","requirementsScreen"];
e=function(){var j=$(".capture_required");
if(j.length){j.attr("aria-required","true")
}};
c=function(j){h(j).then(function(k){k.mandatoryFields.forEach(function(q){var l=a.filter(function(s){return s.name===j
});
var r=l[0].janrainFieldNames[q.name];
switch(q.type){case"date":var o=jQuery("#"+r+"_dateselectmonth");
var p=jQuery("#"+r+"_dateselectday");
var m=jQuery("#"+r+"_dateselectyear");
o.attr("aria-required","true");
p.attr("aria-required","true");
m.attr("aria-required","true");
break;
default:var n=jQuery("#"+r);
n.attr("aria-required","true");
break
}})
});
e()
};
function g(){var j=jQuery("#isSurveyValid"),k=j&&j.length>0&&j[0].value==="true";
if(!k){OneKOID.Events.publish("registration-screen-show-errors")
}return k
}b=function(l){var j=true,k=OneKOID.FieldsConfiguration.fieldErrorMessages;
if(l==="traditionalRegistration"||l==="socialRegistration"){j=g()
}h(l).then(function(m){m.mandatoryFields.forEach(function(v){var x=a.filter(function(z){return z.name===l
});
var w=x[0].janrainFieldNames[v.name];
var r=k.filter(function(z){return z.fieldNameSuffix.indexOf(v.name)>-1
})[0];
switch(r.fieldStructure){case"text":var n=jQuery("#"+w);
var o=jQuery("#"+w).attr("placeholder");
if(jQuery.trim(n.val())===""||jQuery.trim(n.val())==o){var y=n.parent();
y.removeClass("capture_validated");
y.addClass("capture_error");
n.siblings(".capture_tip_error").html(r.errorMessage);
j=false
}break;
case"checkbox":var n=jQuery("#"+w);
if(n[0]){var y=n.parent().parent();
if(jQuery.trim(n[0].checked)=="false"){y.removeClass("capture_validated");
y.addClass("capture_error");
y.siblings(".capture_tip_error").html(r.errorMessage).show();
j=false
}else{n.parent().removeClass("capture_error").addClass("capture_validated");
y.siblings(".capture_tip_error").html("").hide()
}}break;
case"radio":var q="input[name='"+v.name+"']";
var n=$(q);
var p=$(q+":checked").val();
var y=n.parent().parent();
if(!p){y.removeClass("capture_validated");
y.addClass("capture_error");
y.siblings(".capture_tip_error").html(r.errorMessage).show();
j=false
}else{y.removeClass("capture_error").addClass("capture_validated");
y.siblings(".capture_tip_error").html("").hide()
}break;
case"select":var n=jQuery("#"+w);
var y=n.parent();
if(jQuery.trim(n.val())===""){y.removeClass("capture_validated");
y.addClass("capture_error");
y.siblings(".capture_tip_error").html(r.errorMessage);
j=false
}else{y.removeClass("capture_error").addClass("capture_validated");
y.siblings(".capture_tip_error").html("")
}break;
case"date":var s=jQuery("#"+w+"_dateselectmonth"),u=jQuery("#"+w+"_dateselectday"),t=jQuery("#"+w+"_dateselectyear");
if(jQuery.trim(s.val())==""||jQuery.trim(u.val())==""||jQuery.trim(t.val())==""){s.parent().parent().removeClass("capture_validated");
s.parent().parent().addClass("capture_error");
s.parent().siblings(".capture_tip_error").html(r.errorMessage);
j=false
}break
}});
OneKOID.FormUtility.focusOnError();
return j
});
return j
};
function i(k){return $.ajax(k).then(function l(m){return m
},function j(m){window.console.log(m);
return{}
})
}function h(l){f=f||[];
var k=f.filter(function(n){return n.screenName===l
});
if(k.length>0){return new $.Deferred().resolve(k[0].fields)
}else{var j=$("input[data-component-path][data-screen-name*="+l+"]");
var m;
if(j.length>0){m=j.attr("data-component-path")
}else{m=$("input[data-component-path]").attr("data-component-path")
}if(d.indexOf(l)===-1){return new $.Deferred().reject(new Error(l+" does not need to request the mandatory fields."))
}return i(m+"."+l+".json").then(function(n){var o={screenName:l,fields:n};
f.push(o);
return n
})
}}return{addAriaRequiredProperties:e,addRequiredHTMLProperty:c,validateNames:b}
})();